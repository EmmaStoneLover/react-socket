(this["webpackJsonpreact-socket"]=this["webpackJsonpreact-socket"]||[]).push([[0],{130:function(e,t,r){},145:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(42),a=r.n(o),c=(r(130),r(12)),l=r(194),s=r(199),i=r(45),u=(r(96),r(197)),j=r(23),d=r(112),b=r(191),g=r(100),O=r(179),h=r(1),m=Object(n.createContext)({toggleColorMode:function(){}});function x(e){var t=e.children,r=localStorage.mode||N.standartMode,o=Object(n.useState)(r),a=Object(c.a)(o,2),l=a[0],s=a[1],i=Object(O.a)("(prefers-color-scheme: dark)"),u=Object(n.useState)({light:v(localStorage.colorLight)||N.standartColor.light,dark:v(localStorage.colorDark)||N.standartColor.dark}),x=Object(c.a)(u,2),f=x[0],p=x[1];function v(e){var t=null;return N.COLORS.forEach((function(r){e===r.name&&(t=r.color)})),t}Object(n.useEffect)((function(){if(r)return"system"===r?s(i?{ststem:!0,active:"dark"}:{ststem:!0,active:"light"}):void("light"===r?s({system:!1,active:"light"}):"dark"===r&&s({system:!1,active:"dark"}))}),[r,i]);var S=Object(n.useCallback)((function(e){var t=null;return N.COLORS.forEach((function(r){e===r.color&&(t=r.name)})),t}),[]),k=Object(n.useCallback)((function(e,t){p("light"===e?function(e){return localStorage.colorLight=S(t),{light:t,dark:e.dark}}:function(e){return localStorage.colorDark=S(t),{light:e.light,dark:t}})}),[S]),y=Object(n.useCallback)((function(e){var t={};return N.COLORS.forEach((function(r){t[r.name]=function(){return k("light"===e?"light":"dark",r.color)}})),t}),[k]),C=Object(n.useMemo)((function(){return Object(d.a)({palette:Object(j.a)({mode:l.active},"light"===l.active?{primary:f.light,secondary:f.light,background:{default:g.a[100],myBox:"white"}}:{primary:f.dark,secondary:f.dark,background:{default:g.a[900],myBox:"rgb(255, 255, 255, 0.05)"}})})}),[l,f]),w=Object(n.useMemo)((function(){return{Mode:{system:function(){localStorage.mode="system",s(Object(j.a)(Object(j.a)({},l),{},{system:!0}))},light:function(){localStorage.mode="light",s({system:!1,active:"light"})},dark:function(){localStorage.mode="dark",s({system:!1,active:"dark"})}},Color:{light:y("light"),dark:y("dark"),colorDefiner:S("light"===C.palette.mode?f.light:f.dark)}}}),[y,S,l,f,C.palette.mode]);return Object(h.jsx)(m.Provider,{value:w,children:Object(h.jsx)(b.a,{theme:C,children:t})})}function f(e){return Object(h.jsx)(l.a,Object(j.a)(Object(j.a)({},e),{},{sx:{m:2,p:2,boxShadow:e.bSh?e.bSh:5,borderRadius:3,bgcolor:e.nobg?null:"background.myBox"},children:e.children}))}var p=r(195);function v(e){return Object(h.jsx)(p.a,Object(j.a)(Object(j.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var S=r(190);function k(e){return Object(h.jsx)(S.a,Object(j.a)(Object(j.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var y=r(196);function C(e){return Object(h.jsx)(y.a,Object(j.a)(Object(j.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var w=r(185),E=r(48),M=r(50),T=r(49),L=r(57),N={AUTH:"https://emmastonenodejs.herokuapp.com",socket:"https://emmastonenodejs.herokuapp.com",COLORS:[{name:"yellow",color:w.a,Name:"Yellow"},{name:"blue",color:E.a,Name:"Blue"},{name:"green",color:M.a,Name:"Green"},{name:"purple",color:T.a,Name:"Purple"},{name:"orange",color:L.a,Name:"Orange"}],standartMode:"system",standartColor:{light:E.a,dark:w.a}};function R(e){var t=e.text,r=e.setText,o=Object(n.useState)(!1),a=Object(c.a)(o,2),l=a[0],s=a[1];return Object(h.jsx)(h.Fragment,{children:t.length?Object(h.jsxs)(f,{children:[Object(h.jsxs)("div",{style:{textAlign:"end"},children:[l?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v,{color:"error",onClick:function(){r([]),delete localStorage.text},children:"Delete text"}),Object(h.jsx)(v,{onClick:function(){localStorage.text=JSON.stringify(t),s(!1)},children:"Save text"})]}):null,Object(h.jsx)(v,{onClick:function(){return s((function(e){return!e}))},children:"\u2022\u2022\u2022"})]}),t.map((function(e,t){return Object(h.jsxs)(u.a,{component:"p",className:"\n                  textLeft\n                  ".concat("\u041c\u0438\u0448\u0430"===e.user?"textRight":null," \n                  ").concat("Emma Stone"===e.user?"textCenter":null,"\n                "),children:[null!==e.user&&"null"!==e.user&&e.user?Object(h.jsxs)(u.a,{component:"b",color:"primary",children:["\xa0 ",e.user]}):null,"\xa0 ",e.message," \xa0"]},t)}))]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.a,{variant:"p",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u0442\u0443\u0442 \u043d\u0435\u0442\u0443"}),Object(h.jsx)("br",{})]})})}var D=r(14),A=r(192),B=r(188),F=r(111),J=function(e){var t=e.text,r=e.setText,o=e.end,a=Object(n.useState)(""),l=Object(c.a)(a,2),s=l[0],i=l[1],u=Object(n.useState)(!1),j=Object(c.a)(u,2),d=j[0],b=j[1],g=Object(n.useRef)();Object(n.useEffect)((function(){return g.current=F.a.connect(N.socket),g.current.on("message",(function(e){r([].concat(Object(D.a)(t),[e])),b(!1)})),o.current.scrollIntoView({behavior:"smooth"}),function(){return g.current.disconnect()}}),[t,r,o]);var O=Object(n.useCallback)((function(e){e.preventDefault(),b(!0),g.current.emit("message",{message:s,user:localStorage.username}),i("")}),[s]);return Object(h.jsx)(f,{children:Object(h.jsx)("form",{onSubmit:O,children:Object(h.jsxs)(A.a,{container:!0,sx:{p:1},children:[Object(h.jsx)(A.a,{item:!0,xs:10,children:Object(h.jsx)(B.a,{required:!0,label:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u044e\u0434\u0430",variant:"outlined",value:s,fullWidth:!0,onChange:function(e){return i(e.target.value)}})}),Object(h.jsx)(A.a,{item:!0,xs:2,sx:{mt:"11px",textAlign:"end"},children:Object(h.jsx)(k,{loading:d,type:"submit",color:"secondary",children:"Send"})})]})})})},W=r(91),q=r.n(W),H=r(106);function P(e){var t=e.logged,r=e.setLogged,o=Object(n.useState)({password:"",login:""}),a=Object(c.a)(o,2),l=a[0],s=a[1],i=Object(n.useState)({error:{login:!1,password:!1},login:"\u043b\u043e\u0433\u0438\u043d \u041d\u043e\u0443\u043d\u0435\u0439\u043c",password:"\u043f\u0430\u0440\u043e\u043b\u044c 1234"}),j=Object(c.a)(i,2),d=j[0],b=j[1],g=Object(n.useState)(!1),O=Object(c.a)(g,2),m=O[0],x=O[1];function p(){return(p=Object(H.a)(q.a.mark((function e(){var t,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:l.login,password:l.password},console.log("\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e:",t),e.next=4,fetch("".concat(N.AUTH,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 4:return e.next=6,e.sent.json();case 6:n=e.sent,console.log("\u041f\u0440\u0438\u0448\u043b\u043e:",n),!n.username||n.userError||n.passwordError?S(n):(localStorage.username=n.username,localStorage.token=n.token,console.log("\u0412\u0441\u0435 \u0437\u0431\u0441",localStorage),r(!0));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){e.userError?b({error:{login:!0,password:!0},login:e.userError,password:"\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0442\u0432\u043e\u0439 \u0433\u043e\u0432\u043d\u043e"}):e.passwordError&&b({error:{login:!1,password:!0},login:"\u0442\u044b \u0442\u0443\u043f\u043e\u0439, ",password:e.passwordError}),x(!1)}function y(e){e.preventDefault(),x(!0),function(){p.apply(this,arguments)}(),s((function(e){return{login:e.login,password:""}}))}return Object(h.jsx)(f,{children:t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(u.a,{variant:"label",children:[""!==l.login?l.login:localStorage.username," \xa0 \xa0"]}),Object(h.jsx)(v,{style:{marginLeft:10},color:"secondary",variant:"outlined",onClick:function(){delete localStorage.username,delete localStorage.token,console.log(localStorage),x(!1),r(!1),s({login:"",password:""}),b({error:{login:!1,password:!1},login:"\u043b\u043e\u0433\u0438\u043d \u041d\u043e\u0443\u043d\u0435\u0439\u043c",password:"\u043f\u0430\u0440\u043e\u043b\u044c 1234"})},children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("form",{onSubmit:function(e){return y(e)},children:[Object(h.jsx)(u.a,{variant:"label",sx:{mr:"25px"},children:"\u042d\u0439 \u044e \u0442\u044b \u043a\u0442\u043e? \u0430"}),Object(h.jsx)(k,{loading:m,type:"submit",color:"secondary",variant:"outlined",children:"\u0412o\u0439\u0442\u0438"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(B.a,{required:!0,fullWidth:!0,type:"username",error:d.error.login,label:d.login,vlaue:l.login,onChange:function(e){return s((function(t){return{login:e.target.value,password:t.password}}))}}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(B.a,{required:!0,fullWidth:!0,type:"password",error:d.error.password,label:d.password,value:l.password,onChange:function(e){return s((function(t){return{login:t.login,password:e.target.value}}))}})]})})})}var I=r(193),U=r(107),z=r.n(U),G=r(109),V=r.n(G),Y=r(108),K=r.n(Y);function Q(e){var t=e.theme,r=e.colorMode,o=Object(n.useState)((function(){return"system"===localStorage.mode?"system":"light"===localStorage.mode?"light":"dark"===localStorage.mode?"dark":N.standartMode})),a=Object(c.a)(o,2),l=a[0],s=a[1],i=Object(n.useState)(),u=Object(c.a)(i,2),j=u[0],d=u[1];return Object(n.useEffect)((function(){return t.palette.mode,d(r.Color.colorDefiner),r.Color.colorDefiner}),[r.Color,t.palette.mode]),Object(h.jsxs)(f,{children:[Object(h.jsxs)(I.a,{color:"primary",exclusive:!0,value:l,onChange:function(e,t){"system"===t?(r.Mode.system(),s(t)):"light"===t?(r.Mode.light(),s(t)):"dark"===t&&(r.Mode.dark(),s(t))},children:[Object(h.jsxs)(C,{value:"system",children:["System \xa0",Object(h.jsx)(z.a,{})]}),Object(h.jsx)(C,{value:"light",children:Object(h.jsx)(K.a,{})}),Object(h.jsx)(C,{value:"dark",children:Object(h.jsx)(V.a,{})})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(I.a,{size:"small",color:"primary",exclusive:!0,value:j,onChange:function(e,n){try{"system"===l?"light"===t.palette.mode?(r.Color.light[n](),d(n)):(r.Color.dark[n](),d(n)):"light"===l?(r.Color.light[n](),d(n)):"dark"===l&&(r.Color.dark[n](),d(n))}catch(o){return}},children:N.COLORS.map((function(e,t){return Object(h.jsx)(C,{value:e.name,children:e.Name},t)}))})]})}var X=r(198),Z=r(110),$=r.n(Z);function _(e){var t=e.setSettings;return Object(h.jsx)(f,{bSh:"0px",nobg:!0,children:Object(h.jsxs)(u.a,{variant:"h4",children:["Emma Stone \xa0",Object(h.jsx)(X.a,{color:"primary",onClick:function(){return t((function(e){return!e}))},children:Object(h.jsx)($.a,{})})]})})}function ee(){var e=Object(n.useState)(function(){try{return JSON.parse(localStorage.text)}catch(e){return[]}}()||[]),t=Object(c.a)(e,2),r=t[0],o=t[1],a=Object(n.useState)((function(){return!(!localStorage.username||null===localStorage.username||"null"===localStorage.username)})),u=Object(c.a)(a,2),j=u[0],d=u[1],b=Object(n.useState)(!1),g=Object(c.a)(b,2),O=g[0],x=g[1],f=Object(i.a)(),p=Object(n.useContext)(m),v=Object(n.useRef)();return Object(h.jsxs)(l.a,{sx:{bgcolor:"background.default",color:"text.primary",minHeight:"100vh"},children:[Object(h.jsxs)(s.a,{className:"App",maxWidth:"sm",sx:{pt:5},children:[Object(h.jsx)(_,{setSettings:x}),O?Object(h.jsx)(Q,{theme:f,colorMode:p}):null,Object(h.jsx)(P,{logged:j,setLogged:d,text:r,setText:o}),j?Object(h.jsx)(R,{text:r,setText:o}):null,j?Object(h.jsx)(J,{text:r,setText:o,end:v}):null]}),Object(h.jsx)("br",{ref:v})]})}a.a.render(Object(h.jsx)(x,{children:Object(h.jsx)(ee,{})}),document.getElementById("root"))},96:function(e,t,r){}},[[145,1,2]]]);
//# sourceMappingURL=main.67558397.chunk.js.map