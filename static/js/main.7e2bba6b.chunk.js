(this["webpackJsonpreact-socket"]=this["webpackJsonpreact-socket"]||[]).push([[0],{130:function(e,t,r){},145:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(42),a=r.n(o),c=(r(130),r(12)),l=r(194),s=r(199),i=r(45),u=(r(96),r(197)),j=r(192),d=r(23),b=r(112),O=r(191),g=r(100),h=r(179),m=r(1),x=Object(n.createContext)({toggleColorMode:function(){}});function f(e){var t=e.children,r=localStorage.mode||R.standartMode,o=Object(n.useState)(r),a=Object(c.a)(o,2),l=a[0],s=a[1],i=Object(h.a)("(prefers-color-scheme: dark)"),u=Object(n.useState)({light:v(localStorage.colorLight)||R.standartColor.light,dark:v(localStorage.colorDark)||R.standartColor.dark}),j=Object(c.a)(u,2),f=j[0],p=j[1];function v(e){var t=null;return R.COLORS.forEach((function(r){e===r.name&&(t=r.color)})),t}Object(n.useEffect)((function(){if(r)return"system"===r?s(i?{ststem:!0,active:"dark"}:{ststem:!0,active:"light"}):void("light"===r?s({system:!1,active:"light"}):"dark"===r&&s({system:!1,active:"dark"}))}),[r,i]);var S=Object(n.useCallback)((function(e){var t=null;return R.COLORS.forEach((function(r){e===r.color&&(t=r.name)})),t}),[]),k=Object(n.useCallback)((function(e,t){p("light"===e?function(e){return localStorage.colorLight=S(t),{light:t,dark:e.dark}}:function(e){return localStorage.colorDark=S(t),{light:e.light,dark:t}})}),[S]),y=Object(n.useCallback)((function(e){var t={};return R.COLORS.forEach((function(r){t[r.name]=function(){return k("light"===e?"light":"dark",r.color)}})),t}),[k]),C=Object(n.useMemo)((function(){return Object(b.a)({palette:Object(d.a)({mode:l.active},"light"===l.active?{primary:f.light,secondary:f.light,background:{default:g.a[100],myBox:"white"}}:{primary:f.dark,secondary:f.dark,background:{default:g.a[900],myBox:"rgb(255, 255, 255, 0.05)"}})})}),[l,f]),w=Object(n.useMemo)((function(){return{Mode:{system:function(){localStorage.mode="system",s(Object(d.a)(Object(d.a)({},l),{},{system:!0}))},light:function(){localStorage.mode="light",s({system:!1,active:"light"})},dark:function(){localStorage.mode="dark",s({system:!1,active:"dark"})}},Color:{light:y("light"),dark:y("dark"),colorDefiner:S("light"===C.palette.mode?f.light:f.dark)}}}),[y,S,l,f,C.palette.mode]);return Object(m.jsx)(x.Provider,{value:w,children:Object(m.jsx)(O.a,{theme:C,children:t})})}function p(e){return Object(m.jsx)(l.a,Object(d.a)(Object(d.a)({},e),{},{sx:{m:2,p:2,boxShadow:e.bSh?e.bSh:5,borderRadius:3,bgcolor:e.nobg?null:"background.myBox"},children:e.children}))}var v=r(195);function S(e){return Object(m.jsx)(v.a,Object(d.a)(Object(d.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var k=r(190);function y(e){return Object(m.jsx)(k.a,Object(d.a)(Object(d.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var C=r(196);function w(e){return Object(m.jsx)(C.a,Object(d.a)(Object(d.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var E=r(185),M=r(48),T=r(50),L=r(49),N=r(57),R={AUTH:"https://emmastonenodejs.herokuapp.com",socket:"http://localhost:7000",COLORS:[{name:"yellow",color:E.a,Name:"Yellow"},{name:"blue",color:M.a,Name:"Blue"},{name:"green",color:T.a,Name:"Green"},{name:"purple",color:L.a,Name:"Purple"},{name:"orange",color:N.a,Name:"Orange"}],standartMode:"system",standartColor:{light:M.a,dark:E.a}};function D(e){var t=e.text,r=e.setText,o=Object(n.useState)(!1),a=Object(c.a)(o,2),l=a[0],s=a[1];return Object(m.jsx)(m.Fragment,{children:t.length?Object(m.jsxs)(p,{children:[t.map((function(e,t){return Object(m.jsxs)(u.a,{component:"p",className:"\n              textLeft\n              ".concat("\u041c\u0438\u0448\u0430"===e.user?"textRight":null," \n              ").concat("Emma Stone"===e.user?"textCenter":null,"\n              "),children:[null!==e.user&&"null"!==e.user&&e.user?Object(m.jsxs)(u.a,{component:"b",color:"primary",children:["\xa0 ",e.user]}):null,"\xa0 ",e.message," \xa0"]},t)})),Object(m.jsx)("br",{}),Object(m.jsx)("div",{children:Object(m.jsxs)(j.a,{container:!0,style:{textAlign:"start"},children:[Object(m.jsx)(j.a,{item:!0,xs:2,children:Object(m.jsx)(S,{onClick:function(){return s((function(e){return!e}))},children:"\u2022\u2022\u2022"})}),l?Object(m.jsxs)(j.a,{item:!0,xs:10,children:["\xa0 \xa0",Object(m.jsx)(S,{color:"success",onClick:function(){localStorage.text=JSON.stringify(t),s(!1)},children:"Save text"}),Object(m.jsx)(S,{color:"error",onClick:function(){r([]),delete localStorage.text},children:"Delete text"})]}):null]})})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)(u.a,{variant:"p",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u0442\u0443\u0442 \u043d\u0435\u0442\u0443"}),Object(m.jsx)("br",{})]})})}var A=r(14),B=r(188),J=r(111),W=function(e){var t=e.text,r=e.setText,o=e.end,a=Object(n.useState)(""),l=Object(c.a)(a,2),s=l[0],i=l[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),b=d[0],O=d[1],g=Object(n.useRef)();Object(n.useEffect)((function(){return g.current=J.a.connect(R.socket),g.current.on("message",(function(e){r([].concat(Object(A.a)(t),[e])),O(!1)})),o.current.scrollIntoView({behavior:"smooth"}),function(){return g.current.disconnect()}}),[t,r,o]);var h=Object(n.useCallback)((function(e){e.preventDefault(),O(!0),g.current.emit("message",{message:s,user:localStorage.username}),i("")}),[s]);return Object(m.jsx)(p,{children:Object(m.jsx)("form",{onSubmit:h,children:Object(m.jsxs)(j.a,{container:!0,sx:{p:1},children:[Object(m.jsx)(j.a,{item:!0,xs:10,children:Object(m.jsx)(B.a,{required:!0,label:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u044e\u0434\u0430",variant:"outlined",value:s,fullWidth:!0,onChange:function(e){return i(e.target.value)}})}),Object(m.jsx)(j.a,{item:!0,xs:2,sx:{mt:"11px",textAlign:"end"},children:Object(m.jsx)(y,{loading:b,type:"submit",color:"secondary",children:"Send"})})]})})})},q=r(91),F=r.n(q),H=r(106);function P(e){var t=e.logged,r=e.setLogged,o=Object(n.useState)({password:"",login:""}),a=Object(c.a)(o,2),l=a[0],s=a[1],i=Object(n.useState)({error:{login:!1,password:!1},login:"\u043b\u043e\u0433\u0438\u043d \u041d\u043e\u0443\u043d\u0435\u0439\u043c",password:"\u043f\u0430\u0440\u043e\u043b\u044c 1234"}),j=Object(c.a)(i,2),d=j[0],b=j[1],O=Object(n.useState)(!1),g=Object(c.a)(O,2),h=g[0],x=g[1];function f(){return(f=Object(H.a)(F.a.mark((function e(){var t,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:l.login,password:l.password},console.log("\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e:",t),e.next=4,fetch("".concat(R.AUTH,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 4:return e.next=6,e.sent.json();case 6:n=e.sent,console.log("\u041f\u0440\u0438\u0448\u043b\u043e:",n),!n.username||n.userError||n.passwordError?v(n):(localStorage.username=n.username,localStorage.token=n.token,console.log("\u0412\u0441\u0435 \u0437\u0431\u0441",localStorage),r(!0));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){e.userError?b({error:{login:!0,password:!0},login:e.userError,password:"\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0442\u0432\u043e\u0439 \u0433\u043e\u0432\u043d\u043e"}):e.passwordError&&b({error:{login:!1,password:!0},login:"\u0442\u044b \u0442\u0443\u043f\u043e\u0439, ",password:e.passwordError}),x(!1)}function k(e){e.preventDefault(),x(!0),function(){f.apply(this,arguments)}(),s((function(e){return{login:e.login,password:""}}))}return Object(m.jsx)(p,{children:t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(u.a,{variant:"label",children:[""!==l.login?l.login:localStorage.username," \xa0 \xa0"]}),Object(m.jsx)(S,{style:{marginLeft:10},color:"secondary",variant:"outlined",onClick:function(){delete localStorage.username,delete localStorage.token,console.log(localStorage),x(!1),r(!1),s({login:"",password:""}),b({error:{login:!1,password:!1},login:"\u043b\u043e\u0433\u0438\u043d \u041d\u043e\u0443\u043d\u0435\u0439\u043c",password:"\u043f\u0430\u0440\u043e\u043b\u044c 1234"})},children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{onSubmit:function(e){return k(e)},children:[Object(m.jsx)(u.a,{variant:"label",sx:{mr:"25px"},children:"\u042d\u0439 \u044e \u0442\u044b \u043a\u0442\u043e? \u0430"}),Object(m.jsx)(y,{loading:h,type:"submit",color:"secondary",variant:"outlined",children:"\u0412o\u0439\u0442\u0438"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(B.a,{required:!0,fullWidth:!0,type:"username",error:d.error.login,label:d.login,vlaue:l.login,onChange:function(e){return s((function(t){return{login:e.target.value,password:t.password}}))}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(B.a,{required:!0,fullWidth:!0,type:"password",error:d.error.password,label:d.password,value:l.password,onChange:function(e){return s((function(t){return{login:t.login,password:e.target.value}}))}})]})})})}var I=r(193),U=r(107),z=r.n(U),G=r(109),V=r.n(G),Y=r(108),K=r.n(Y);function Q(e){var t=e.theme,r=e.colorMode,o=Object(n.useState)((function(){return"system"===localStorage.mode?"system":"light"===localStorage.mode?"light":"dark"===localStorage.mode?"dark":R.standartMode})),a=Object(c.a)(o,2),l=a[0],s=a[1],i=Object(n.useState)(),u=Object(c.a)(i,2),j=u[0],d=u[1];return Object(n.useEffect)((function(){return t.palette.mode,d(r.Color.colorDefiner),r.Color.colorDefiner}),[r.Color,t.palette.mode]),Object(m.jsxs)(p,{children:[Object(m.jsxs)(I.a,{color:"primary",exclusive:!0,value:l,onChange:function(e,t){"system"===t?(r.Mode.system(),s(t)):"light"===t?(r.Mode.light(),s(t)):"dark"===t&&(r.Mode.dark(),s(t))},children:[Object(m.jsxs)(w,{value:"system",children:["System \xa0",Object(m.jsx)(z.a,{})]}),Object(m.jsx)(w,{value:"light",children:Object(m.jsx)(K.a,{})}),Object(m.jsx)(w,{value:"dark",children:Object(m.jsx)(V.a,{})})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(I.a,{size:"small",color:"primary",exclusive:!0,value:j,onChange:function(e,n){try{"system"===l?"light"===t.palette.mode?(r.Color.light[n](),d(n)):(r.Color.dark[n](),d(n)):"light"===l?(r.Color.light[n](),d(n)):"dark"===l&&(r.Color.dark[n](),d(n))}catch(o){return}},children:R.COLORS.map((function(e,t){return Object(m.jsx)(w,{value:e.name,children:e.Name},t)}))})]})}var X=r(198),Z=r(110),$=r.n(Z);function _(e){var t=e.setSettings;return Object(m.jsx)(p,{bSh:"0px",nobg:!0,children:Object(m.jsxs)(u.a,{variant:"h4",children:["Emma Stone \xa0",Object(m.jsx)(X.a,{color:"primary",onClick:function(){return t((function(e){return!e}))},children:Object(m.jsx)($.a,{})})]})})}function ee(){var e=Object(n.useState)(function(){try{return JSON.parse(localStorage.text)}catch(e){return[]}}()||[]),t=Object(c.a)(e,2),r=t[0],o=t[1],a=Object(n.useState)((function(){return!(!localStorage.username||null===localStorage.username||"null"===localStorage.username)})),u=Object(c.a)(a,2),j=u[0],d=u[1],b=Object(n.useState)(!1),O=Object(c.a)(b,2),g=O[0],h=O[1],f=Object(i.a)(),p=Object(n.useContext)(x),v=Object(n.useRef)();return Object(m.jsxs)(l.a,{sx:{bgcolor:"background.default",color:"text.primary",minHeight:"100vh"},children:[Object(m.jsxs)(s.a,{className:"App",maxWidth:"sm",sx:{pt:5},children:[Object(m.jsx)(_,{setSettings:h}),g?Object(m.jsx)(Q,{theme:f,colorMode:p}):null,Object(m.jsx)(P,{logged:j,setLogged:d,text:r,setText:o}),Object(m.jsx)(D,{text:r,setText:o}),Object(m.jsx)(W,{text:r,setText:o,end:v})]}),Object(m.jsx)("br",{ref:v})]})}a.a.render(Object(m.jsx)(f,{children:Object(m.jsx)(ee,{})}),document.getElementById("root"))},96:function(e,t,r){}},[[145,1,2]]]);
//# sourceMappingURL=main.7e2bba6b.chunk.js.map