(this["webpackJsonpreact-socket"]=this["webpackJsonpreact-socket"]||[]).push([[0],{101:function(e,t,r){},135:function(e,t,r){},150:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(46),a=r.n(o),c=(r(135),r(8)),s=r(200),l=r(205),i=r(48),u=(r(101),r(203)),j=r(24),d=r(117),b=r(197),O=r(105),h=r(185),g=r(1),x=Object(n.createContext)({toggleColorMode:function(){}});function m(e){var t=e.children,r=localStorage.mode||N.standartMode,o=Object(n.useState)(r),a=Object(c.a)(o,2),s=a[0],l=a[1],i=Object(h.a)("(prefers-color-scheme: dark)"),u=Object(n.useState)({light:v(localStorage.colorLight)||N.standartColor.light,dark:v(localStorage.colorDark)||N.standartColor.dark}),m=Object(c.a)(u,2),f=m[0],p=m[1];function v(e){var t=null;return N.COLORS.forEach((function(r){e===r.name&&(t=r.color)})),t}Object(n.useEffect)((function(){if(r)return"system"===r?l(i?{ststem:!0,active:"dark"}:{ststem:!0,active:"light"}):void("light"===r?l({system:!1,active:"light"}):"dark"===r&&l({system:!1,active:"dark"}))}),[r,i]);var S=Object(n.useCallback)((function(e){var t=null;return N.COLORS.forEach((function(r){e===r.color&&(t=r.name)})),t}),[]),k=Object(n.useCallback)((function(e,t){p("light"===e?function(e){return localStorage.colorLight=S(t),{light:t,dark:e.dark}}:function(e){return localStorage.colorDark=S(t),{light:e.light,dark:t}})}),[S]),y=Object(n.useCallback)((function(e){var t={};return N.COLORS.forEach((function(r){t[r.name]=function(){return k("light"===e?"light":"dark",r.color)}})),t}),[k]),C=Object(n.useMemo)((function(){return Object(d.a)({palette:Object(j.a)({mode:s.active},"light"===s.active?{primary:f.light,secondary:f.light,background:{default:O.a[100],myBox:"white"}}:{primary:f.dark,secondary:f.dark,background:{default:O.a[900],myBox:"rgb(255, 255, 255, 0.05)"}})})}),[s,f]),w=Object(n.useMemo)((function(){return{Mode:{system:function(){localStorage.mode="system",l(Object(j.a)(Object(j.a)({},s),{},{system:!0}))},light:function(){localStorage.mode="light",l({system:!1,active:"light"})},dark:function(){localStorage.mode="dark",l({system:!1,active:"dark"})}},Color:{light:y("light"),dark:y("dark"),colorDefiner:S("light"===C.palette.mode?f.light:f.dark)}}}),[y,S,s,f,C.palette.mode]);return Object(g.jsx)(x.Provider,{value:w,children:Object(g.jsx)(b.a,{theme:C,children:t})})}function f(e){return Object(g.jsx)(s.a,Object(j.a)(Object(j.a)({},e),{},{sx:{m:2,p:2,boxShadow:e.bSh?e.bSh:5,borderRadius:3,bgcolor:e.nobg?null:"background.myBox"},children:e.children}))}var p=r(201);function v(e){return Object(g.jsx)(p.a,Object(j.a)(Object(j.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var S=r(196);function k(e){return Object(g.jsx)(S.a,Object(j.a)(Object(j.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var y=r(202);function C(e){return Object(g.jsx)(y.a,Object(j.a)(Object(j.a)({},e),{},{style:{textTransform:"none"},children:e.children}))}var w=r(191),E=r(51),M=r(53),T=r(52),L=r(60),N={AUTH:"https://emmastonenodejs.herokuapp.com",socket:"https://emmastonenodejs.herokuapp.com",COLORS:[{name:"yellow",color:w.a,Name:"Yellow"},{name:"blue",color:E.a,Name:"Blue"},{name:"green",color:M.a,Name:"Green"},{name:"purple",color:T.a,Name:"Purple"},{name:"orange",color:L.a,Name:"Orange"}],standartMode:"system",standartColor:{light:E.a,dark:w.a}};function R(e){var t=e.text,r=e.setText,o=Object(n.useState)(!1),a=Object(c.a)(o,2),s=a[0],l=a[1];return Object(g.jsx)(g.Fragment,{children:t.length?Object(g.jsxs)(f,{children:[Object(g.jsxs)("div",{style:{justifyContent:"space-between",boxSizing:"border-box",display:"flex"},children:[Object(g.jsx)("span",{}),Object(g.jsxs)("span",{children:[s?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(v,{color:"error",onClick:function(){r([]),delete localStorage.text},children:"Delete text"}),Object(g.jsx)(v,{onClick:function(){localStorage.text=JSON.stringify(t),l(!1)},children:"Save text"})]}):null,Object(g.jsx)(v,{onClick:function(){return l((function(e){return!e}))},children:"\u2022\u2022\u2022"})]})]}),Object(g.jsx)("div",{children:t.map((function(e,t){return Object(g.jsxs)(u.a,{component:"p",className:"\n                  textLeft\n                  ".concat("\u041c\u0438\u0448\u0430"===e.user?"textRight":null," \n                  ").concat("Emma Stone"===e.user?"textCenter":null,"\n                "),children:[null!==e.user&&"null"!==e.user&&e.user?Object(g.jsxs)(u.a,{component:"b",color:"primary",children:["\xa0 ",e.user]}):null,"\xa0 ",e.message," \xa0"]},t)}))})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.a,{variant:"p",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u0442\u0443\u0442 \u043d\u0435\u0442\u0443"}),Object(g.jsx)("br",{})]})})}var D=r(15),A=r(198),B=r(194),F=r(116),H=function(e){var t=e.text,r=e.setText,o=e.end,a=Object(n.useState)(""),s=Object(c.a)(a,2),l=s[0],i=s[1],u=Object(n.useState)(!1),j=Object(c.a)(u,2),d=j[0],b=j[1],O=Object(n.useRef)();Object(n.useEffect)((function(){return O.current=F.a.connect(N.socket),O.current.on("message",(function(e){r([].concat(Object(D.a)(t),[e])),b(!1)})),o.current.scrollIntoView({behavior:"smooth"}),function(){return O.current.disconnect()}}),[t,r,o]);var h=Object(n.useCallback)((function(e){e.preventDefault(),b(!0),O.current.emit("message",{message:l,user:localStorage.username}),i("")}),[l]);return Object(g.jsx)(f,{children:Object(g.jsx)("form",{onSubmit:h,children:Object(g.jsxs)(A.a,{container:!0,sx:{p:1},children:[Object(g.jsx)(A.a,{item:!0,xs:10,children:Object(g.jsx)(B.a,{required:!0,label:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u044e\u0434\u0430",variant:"outlined",value:l,fullWidth:!0,onChange:function(e){return i(e.target.value)}})}),Object(g.jsx)(A.a,{item:!0,xs:2,sx:{mt:"11px",textAlign:"end"},children:Object(g.jsx)(k,{loading:d,type:"submit",color:"secondary",children:"Send"})})]})})})},J=r(96),W=r.n(J),q=r(111);function P(e){var t=e.logged,r=e.setLogged,o=Object(n.useState)({password:"",login:""}),a=Object(c.a)(o,2),s=a[0],l=a[1],i=Object(n.useState)({error:{login:!1,password:!1},login:"\u043b\u043e\u0433\u0438\u043d \u041d\u043e\u0443\u043d\u0435\u0439\u043c",password:"\u043f\u0430\u0440\u043e\u043b\u044c 1234"}),j=Object(c.a)(i,2),d=j[0],b=j[1],O=Object(n.useState)(!1),h=Object(c.a)(O,2),x=h[0],m=h[1];function p(){return(p=Object(q.a)(W.a.mark((function e(){var t,n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:s.login,password:s.password},console.log("\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e:",t),e.next=4,fetch("".concat(N.AUTH,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 4:return e.next=6,e.sent.json();case 6:n=e.sent,console.log("\u041f\u0440\u0438\u0448\u043b\u043e:",n),!n.username||n.userError||n.passwordError?S(n):(localStorage.username=n.username,localStorage.token=n.token,console.log("\u0412\u0441\u0435 \u0437\u0431\u0441",localStorage),r(!0));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){e.userError?b({error:{login:!0,password:!0},login:e.userError,password:"\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0442\u0432\u043e\u0439 \u0433\u043e\u0432\u043d\u043e"}):e.passwordError&&b({error:{login:!1,password:!0},login:"\u0442\u044b \u0442\u0443\u043f\u043e\u0439, ",password:e.passwordError}),m(!1)}function y(e){e.preventDefault(),m(!0),function(){p.apply(this,arguments)}(),l((function(e){return{login:e.login,password:""}}))}return Object(g.jsx)(f,{children:t?Object(g.jsxs)("div",{style:{textAlign:"end"},children:[Object(g.jsxs)(u.a,{variant:"label",children:[""!==s.login?s.login:localStorage.username," \xa0 \xa0"]}),Object(g.jsx)(v,{style:{marginLeft:10},color:"secondary",variant:"text",onClick:function(){delete localStorage.username,delete localStorage.token,console.log(localStorage),m(!1),r(!1),l({login:"",password:""}),b({error:{login:!1,password:!1},login:"\u043b\u043e\u0433\u0438\u043d \u041d\u043e\u0443\u043d\u0435\u0439\u043c",password:"\u043f\u0430\u0440\u043e\u043b\u044c 1234"})},children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{onSubmit:function(e){return y(e)},children:[Object(g.jsx)(u.a,{variant:"label",sx:{mr:"25px"},children:"\u042d\u0439 \u044e \u0442\u044b \u043a\u0442\u043e? \u0430"}),Object(g.jsx)(k,{loading:x,type:"submit",color:"secondary",variant:"outlined",children:"\u0412o\u0439\u0442\u0438"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(B.a,{required:!0,fullWidth:!0,type:"username",error:d.error.login,label:d.login,vlaue:s.login,onChange:function(e){return l((function(t){return{login:e.target.value,password:t.password}}))}}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(B.a,{required:!0,fullWidth:!0,type:"password",error:d.error.password,label:d.password,value:s.password,onChange:function(e){return l((function(t){return{login:t.login,password:e.target.value}}))}})]})})})}var z=r(199),I=r(112),U=r.n(I),G=r(114),V=r.n(G),Y=r(113),K=r.n(Y);function Q(e){var t=e.theme,r=e.colorMode,o=Object(n.useState)((function(){return"system"===localStorage.mode?"system":"light"===localStorage.mode?"light":"dark"===localStorage.mode?"dark":N.standartMode})),a=Object(c.a)(o,2),s=a[0],l=a[1],i=Object(n.useState)(),u=Object(c.a)(i,2),j=u[0],d=u[1];return Object(n.useEffect)((function(){return t.palette.mode,d(r.Color.colorDefiner),r.Color.colorDefiner}),[r.Color,t.palette.mode]),Object(g.jsxs)(f,{children:[Object(g.jsxs)(z.a,{color:"primary",exclusive:!0,value:s,onChange:function(e,t){"system"===t?(r.Mode.system(),l(t)):"light"===t?(r.Mode.light(),l(t)):"dark"===t&&(r.Mode.dark(),l(t))},children:[Object(g.jsxs)(C,{value:"system",children:["System \xa0",Object(g.jsx)(U.a,{})]}),Object(g.jsx)(C,{value:"light",children:Object(g.jsx)(K.a,{})}),Object(g.jsx)(C,{value:"dark",children:Object(g.jsx)(V.a,{})})]}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(z.a,{size:"small",color:"primary",exclusive:!0,value:j,onChange:function(e,n){try{"system"===s?"light"===t.palette.mode?(r.Color.light[n](),d(n)):(r.Color.dark[n](),d(n)):"light"===s?(r.Color.light[n](),d(n)):"dark"===s&&(r.Color.dark[n](),d(n))}catch(o){return}},children:N.COLORS.map((function(e,t){return Object(g.jsx)(C,{value:e.name,children:e.Name},t)}))})]})}var X=r(204),Z=r(115),$=r.n(Z);function _(e){var t=e.setSettings;return Object(g.jsx)(f,{bSh:"0px",nobg:!0,children:Object(g.jsxs)(u.a,{variant:"h4",children:["Emma Stone \xa0",Object(g.jsx)(X.a,{color:"primary",onClick:function(){return t((function(e){return!e}))},children:Object(g.jsx)($.a,{})})]})})}var ee=r(84),te=r(14);function re(){return Object(g.jsx)(f,{children:Object(g.jsx)(u.a,{variant:"h4",children:"\u0416\u043e\u043f\u0430"})})}function ne(){var e=Object(n.useState)(function(){try{return JSON.parse(localStorage.text)}catch(e){return[]}}()||[]),t=Object(c.a)(e,2),r=t[0],o=t[1],a=Object(n.useState)((function(){return!(!localStorage.username||null===localStorage.username||"null"===localStorage.username)})),u=Object(c.a)(a,2),j=u[0],d=u[1],b=Object(n.useState)(!1),O=Object(c.a)(b,2),h=O[0],m=O[1],f=Object(i.a)(),p=Object(n.useContext)(x),v=Object(n.useRef)();return Object(g.jsxs)(s.a,{sx:{bgcolor:"background.default",color:"text.primary",minHeight:"100vh"},children:[Object(g.jsxs)(l.a,{className:"App",maxWidth:"sm",sx:{pt:5},children:[Object(g.jsx)(_,{setSettings:m}),h?Object(g.jsx)(Q,{theme:f,colorMode:p}):null,Object(g.jsx)(P,{logged:j,setLogged:d,text:r,setText:o}),Object(g.jsxs)(ee.a,{children:[Object(g.jsx)(ee.b,{to:"/",children:"Home"})," ",Object(g.jsx)(ee.b,{to:"/alise",children:"Alise"}),Object(g.jsx)("br",{}),Object(g.jsx)("a",{href:"https://emmastonelover.github.io/react-socket/",children:"Home"})," ",Object(g.jsx)("a",{href:"https://emmastonelover.github.io/react-socket/#/alise",children:"Alise"}),Object(g.jsx)("br",{}),Object(g.jsxs)(te.c,{children:[Object(g.jsx)(te.a,{path:"*",element:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(R,{text:r,setText:o}),Object(g.jsx)(H,{text:r,setText:o,end:v})]})}),Object(g.jsx)(te.a,{path:"/alise",element:Object(g.jsx)(re,{})})]})]})]}),Object(g.jsx)("br",{ref:v})]})}a.a.render(Object(g.jsx)(m,{children:Object(g.jsx)(ne,{})}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.3a433c71.chunk.js.map